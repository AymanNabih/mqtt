/**
 *
 */
package org.eclipsescout.mqttclient.client.services;

import org.eclipse.scout.commons.exception.ProcessingException;
import org.eclipse.scout.commons.prefs.UserPreferences;
import org.eclipse.scout.rt.shared.TEXTS;
import org.eclipse.scout.service.AbstractService;
import org.osgi.service.prefs.BackingStoreException;

/**
 * @author mzi
 */
public class UserPreferencesService extends AbstractService implements IUserPreferencesService {
  private final String PREFERENCES_DOMAIN = "MQTT";
  private UserPreferences m_pref = null;

  public UserPreferencesService() {
    super();
    m_pref = new UserPreferences(PREFERENCES_DOMAIN);
  }

  @Override
  public void load() throws ProcessingException {
    m_pref.create();
  }

  @Override
  public void store() throws ProcessingException {
    try {
      m_pref.flush();
    }
    catch (BackingStoreException e) {
      throw new ProcessingException(TEXTS.get("PrefFlushFailed"), e);
    }
  }

  @Override
  public void setBrokerURL(String url) throws ProcessingException {
    //TODO [mzi] business logic here.

  }

}
